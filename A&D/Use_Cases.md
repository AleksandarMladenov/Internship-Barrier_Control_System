


# Driver
|                    |                                                                                                                                                                                                                                                                               |
| ------------------ |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name:**          | **Entry — Not Listed (Payment Deferred)**                                                                                                                                                                                                                                     |
| **Actor:**         | Driver                                                                                                                                                                                                                                                                        |
| **Description:**   | Driver enters when plate is neither whitelisted nor blacklisted; session opens; payment deferred to exit.                                                                                                                                                                     |
| **Pre-Condition:** | camera operational.                                                                                                                                                                                                                                                           |
| **Scenario:**      | 1) Camera captures plate at **entry** (timestamp, **read quality**).<br>2) System confirms plate is not on lists.<br>3) System **opens a session** for the plate.<br>4) System commands barrier to **Open**; barrier raises.<br>5) Optional display: “Welcome — pay at exit.” |
| **Result:**        | Session **open**; vehicle inside; no payment yet.                                                                                                                                                                                                                             |
| **Extensions:**    | **1) Low read quality** → allow entry; session flagged for confirmation at exit.                                                                                                                                                                                              |
| **Exceptions:**    | 1) Camera offline → local policy decides (fail-safe open/queue).                                                                                                                                                                                                              |


|                    |                                                                                                                                                                                                                                                                                 |
| ------------------ |---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name:**          | **Entry — Whitelisted (Subscription)**                                                                                                                                                                                                                                          |
| **Actor:**         | Driver                                                                                                                                                                                                                                                                          |
| **Description:**   | Recognized subscriber enters automatically; fee waived/discounted per policy.                                                                                                                                                                                                   |
| **Pre-Condition:** | The vehicle should be whitelisted.                                                                                                                                                                                                                                              |
| **Scenario:**      | 1) Camera captures plate at **entry** (timestamp, **read quality**).<br>2) System matches whitelist and checks expiry.<br>3) System **opens** (or logs) a zero-fee/discounted session per policy.<br>4) System commands barrier to **Open**; display “Subscription recognized.” |
| **Result:**        | Entry granted; session tracked (fee waived/discounted).                                                                                                                                                                                                                         |
| **Extensions:**    | Subscription nearing expiry → display heads-up in portal.                                                                                                                                                                                                                       |
| **Exceptions:**    | Subscription expired → fall back to “Not Listed” entry flow.                                                                                                                                                                                                                    |


|                    |                                                                                                                                                                                            |
| ------------------ |--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name:**          | **Entry — Blacklisted (Denied)**                                                                                                                                                           |
| **Actor:**         | Driver                                                                                                                                                                                     |
| **Description:**   | Access is denied for blacklisted plates.                                                                                                                                                   |
| **Pre-Condition:** | Plate exists on blacklist.                                                                                                                                                                 |
| **Scenario:**      | 1) Camera captures plate at **entry** (timestamp, **read quality**).<br>2) System matches blacklist.<br>3) System **does not open**; event is logged.<br>4) Lane display: “Access denied.” |
| **Result:**        | No session opened; car remains outside.                                                                                                                                                    |
| **Extensions:**    | 1)**Very low read quality** → prompt re-approach; still deny on match.                                                                                                                     |
| **Exceptions:**    | 1) Misread reported by driver via help URL → flagged for audit review.                                                                                                                     |


|                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Name:**          | **Exit — Scan QR, Pay in Dashboard, Barrier Opens**                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Actor:**         | Driver                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Description:**   | Driver pays at exit via self-service dashboard and the barrier opens automatically afterward.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Pre-Condition:** | Open **unpaid** session exists for plate; exit camera online.                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Scenario:**      | 1) Camera reads plate at **exit** (timestamp, **read quality**); system finds open unpaid session; barrier remains closed.<br>2) Lane display shows **QR** to self-service dashboard.<br>3) Driver scans QR; dashboard shows session with **duration** and **fee**.<br>4) Driver initiates **card payment**; payment service authorizes/captures.<br>5) System marks session **paid** and shows **receipt** (amount, plate, duration).<br>6) System commands barrier to **Open**; barrier raises; session **closes**. |
| **Result:**        | Payment completed; receipt displayed; barrier opens; session closed.                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Extensions:**    | Network lag after payment → dashboard shows **exit token/QR**; barrier validates and opens once confirmed.                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Exceptions:**    | Payment failed/declined → error shown; retry allowed; barrier stays closed until paid.                                                                                                                                                                                                                                                                                                                                                                                                                                |


|                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ------------------ |------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name:**          | **Subscribe Vehicle / Register for Whitelist**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Actor:**         | Driver                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Description:**   | Driver self-registers a license plate for a subscription so the plate is added to the whitelist (auto-open, fee waived/discounted per policy) **after admin authentication**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Pre-Condition:** | Self-service dashboard reachable; subscription plans available; payment service available. Plate is **not** currently on an active whitelist subscription. **Admin must authenticate the license plate before activation.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **Scenario:**      | 1) Driver opens **Subscription** in the dashboard (via QR/URL).<br>2) Driver enters **license plate** and contact details (email/phone), accepts terms.<br>3) Driver selects a **plan** (e.g., monthly), chooses **start date** (now or future), and **auto-renew** option.<br>4) System checks for **existing/overlapping** subscriptions and shows summary.<br>5) Driver proceeds to **pay**; payment service authorizes/captures.<br>6) System creates a **subscription = Pending Admin Authentication** (no whitelist privileges yet).<br>7) **Admin authenticates** the plate.<br>8) System **activates whitelist entry** with policy (auto-open; fee waived/discounted) and **expiry** per plan; dashboard shows **confirmation/receipt** and status: “Subscription active.” |
| **Result:**        | Plate is **whitelisted** with the chosen policy and validity window **after admin authentication**; receipt delivered; future entries will auto-open.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Extensions:**    | 3) **Future start date** → subscription marked **Scheduled + Pending**; until admin authenticates and the start date arrives, entries follow “Not Listed.”<br>7) **ownership verification** (email/SMS code or next-lane read with good **read quality**) to assist admin review.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Exceptions:**    | 4) Plate **already whitelisted** → system blocks duplicate and shows existing subscription with renewal options.<br>5) Payment **failed/declined** → subscription not created; driver can retry.<br>Invalid plate format → inline validation prevents continuation.<br>7) **Admin rejects authentication** → subscription marked **Rejected**; notify driver and follow refund/cancellation policy.                                                                                                                                                                                                                                                                                                                                                                                |

## Admin
|                    |                                                                                                                                                                                        |
| ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Name:**          | **Create Report Templates**                                                                                                                                                            |
| **Actor:**         | Admin                                                                                                                                                                                  |
| **Description:**   | Define reusable report blueprints (e.g., Revenue by Period, Occupancy by Hour).                                                                                                        |
| **Pre-Condition:** | Admin authenticated.                                                                                                                                                                   |
| **Scenario:**      | 1) Admin opens **Reports → Templates**.<br>2) Chooses report type and sets parameters (defaults, filters, columns).<br>3) Optionally adds a chart visualization.<br>4) Saves template. |
| **Result:**        | Template saved and available for future runs; change is audit-logged.                                                                                                                  |
| **Extensions:**    | Copy existing template → edit → save as new.                                                                                                                                           |
| **Exceptions:**    | Missing/invalid parameters → inline validation prevents save.                                                                                                                          |

|                    |                                                                                                                                                                                                                    |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Name:**          | **Access & Run Reports**                                                                                                                                                                                           |
| **Actor:**         | Admin                                                                                                                                                                                                              |
| **Description:**   | Generate reports from saved templates for a chosen period and export results.                                                                                                                                      |
| **Pre-Condition:** | At least one template exists; data present for selected period.                                                                                                                                                    |
| **Scenario:**      | 1) Admin opens **Reports → Run**.<br>2) Selects a template and period/filters.<br>3) Clicks **Run**; system renders table (and chart if defined).<br>4) Admin exports to CSV/PDF.<br>5) System audit-logs the run. |
| **Result:**        | Report displayed and downloadable.                                                                                                                                                                                 |
| **Extensions:**    | Schedule recurring runs (future option).                                                                                                                                                                           |
| **Exceptions:**    | Sparse/no data → informational notice; export still allowed.                                                                                                                                                       |



|                    |                                                                                                                                                                                 |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Name:**          | **Authorize/Block Vehicles (Whitelist/Blacklist)**                                                                                                                              |
| **Actor:**         | Admin                                                                                                                                                                           |
| **Description:**   | Manage plates that auto-open (whitelist) or are denied (blacklist); optional expiry/labels.                                                                                     |
| **Pre-Condition:** | Admin authenticated.                                                                                                                                                            |
| **Scenario:**      | 1) Admin opens **Lists**.<br>2) Adds/edits/removes entries (plate, label, expiry, policy).<br>3) System updates matching cache immediately.<br>4) System audit-logs the change. |
| **Result:**        | Access policies take effect for future camera recognitions.                                                                                                                     |
| **Extensions:**    | Bulk CSV import with validation report.                                                                                                                                         |
| **Exceptions:**    | Duplicate plate detected → save blocked; link to existing record.                                                                                                               |


|                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------ |-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Name:**          | **Configure Access Roles & Authentication**                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Actor:**         | Admin (owner)                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Description:**   | Manages admin users and roles (Owner/Admin/Viewer) and defines authentication policies (login methods, MFA—optional), credential lifecycle, and session controls.                                                                                                                                                                                                                                                                                                           |
| **Pre-Condition:** | Owner-level admin is authenticated; at least one Owner must always exist.                                                                                                                                                                                                                                                                                                                                                                                                   |
| **Scenario:**      | 1) Admin opens **Users, Roles & Auth**.<br>2) Sets **auth policy**: allowed login method(s) (email/password), session timeout, password rules.<br>3) **Invites** a user (email), assigns **role**, selects auth method.<br>4) User **verifies email** and completes **MFA** enrollment (if required).<br>5) System **saves** and begins enforcing the updated policies.<br>6) Admin may **change role**, **suspend** a user, **revoke sessions**, or **reset credentials**. |
| **Result:**        | Access list updated; auth policies enforced; invited users can sign in via chosen method; existing users inherit new requirements (e.g., MFA); revoked sessions are terminated.                                                                                                                                                                                                                                                                                             |
| **Extensions:**    | 3) Enforce **email-domain allowlist** for invites; configurable **MFA period**.                                                                                                                                                                                                                                                                                                                                                                                             |
| **Exceptions:**    | 3) Invite expired/rejected → re-send invite; invalid email blocked.<br>• 6)Attempt to remove the **last Owner** → blocked with clear message.<br>• 6)Role change that would lock out all Owners → require explicit confirmation.                                                                                                                                                                                                                                            |


